import { Issue, WorkStream, Assignee } from '../types';

// Mock Assignees
export const mockAssignees: Assignee[] = [
  {
    id: '1',
    name: 'Fran Perez',
    avatar: 'https://images.pexels.com/photos/1462980/pexels-photo-1462980.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=1',
    email: 'fran.perez@company.com',
  },
  {
    id: '2', 
    name: 'Hassana Ajiyi',
    avatar: 'https://images.pexels.com/photos/1681010/pexels-photo-1681010.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=1',
    email: 'hassana.ajiyi@company.com',
  },
  {
    id: '3',
    name: 'Andreas Ramos',
    avatar: 'https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=1',
    email: 'andreas.ramos@company.com',
  },
  {
    id: '4',
    name: 'Lydia Legume',
    avatar: 'https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=1',
    email: 'lydia.legume@company.com',
  },
  {
    id: '5',
    name: 'Maria Santos',
    avatar: 'https://images.pexels.com/photos/1130626/pexels-photo-1130626.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=1',
    email: 'maria.santos@company.com',
  },
];

// Mock Issues - Multiple issues per person with limited overdue items
export const mockIssues: Issue[] = [
  // Fran Perez's issues (15 total: 2 overdue, 13 regular)
  {
    id: '1',
    key: 'WI-1',
    summary: 'Implement user authentication flow',
    status: 'IN PROGRESS',
    assignee: mockAssignees[0],
    effort: 11,
    effortRemaining: 8,
    startDate: '2025-01-15',
    dueDate: '2025-02-15',
    targetDate: '2025-02-10',
    actualStartDate: '2025-01-18',
    comments: 3,
    issueType: 'story',
    workStream: 'work-stream-1',
    budget: 2800,
    storyPoints: 8,
    originalEstimate: 16,
    remainingEstimate: 10,
    timeSpent: 6,
    dependencies: [
      {
        id: 'dep-1',
        type: 'is-blocked-by',
        targetIssueId: '11',
        targetIssueKey: 'WI-11',
        targetIssueStatus: 'DONE',
        targetIssueSummary: 'API documentation',
      }
    ],
  },
  {
    id: '2',
    key: 'WI-2',
    summary: 'Create user profile page',
    status: 'TO DO',
    assignee: mockAssignees[0],
    effort: 8,
    effortRemaining: 8,
    startDate: '2025-01-20',
    dueDate: '2025-02-20',
    targetDate: '2025-02-18',
    comments: 0,
    issueType: 'story',
    workStream: 'work-stream-1',
    budget: 1800,
    storyPoints: 5,
    originalEstimate: 12,
    remainingEstimate: 12,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-2',
        type: 'is-blocked-by',
        targetIssueId: '9',
        targetIssueKey: 'WI-9',
        targetIssueStatus: 'IN PROGRESS',
        targetIssueSummary: 'Design system implementation',
      }
    ],
  },
  {
    id: '3',
    key: 'WI-3',
    summary: 'Add password reset functionality',
    status: 'DONE',
    assignee: mockAssignees[0],
    effort: 6,
    effortRemaining: 0,
    startDate: '2025-01-10',
    dueDate: '2025-01-25',
    targetDate: '2025-01-20',
    actualDueDate: '2025-01-23', // 3 days late from target, but 2 days early from due date
    actualStartDate: '2025-01-12',
    comments: 2,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 950,
    storyPoints: 3,
    originalEstimate: 8,
    remainingEstimate: 0,
    timeSpent: 9, // Went over estimate slightly
    dependencies: [],
  },
  // OVERDUE ITEM 1 for Fran
  {
    id: '30',
    key: 'WI-30',
    summary: 'Security patches',
    status: 'TO DO',
    assignee: mockAssignees[0],
    effort: 6,
    effortRemaining: 6,
    startDate: '2025-01-05',
    dueDate: '2025-01-12',
    targetDate: '2025-01-10',
    comments: 5,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 1200,
    storyPoints: 2,
    originalEstimate: 8,
    remainingEstimate: 8,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-3',
        type: 'is-blocked-by',
        targetIssueId: '6',
        targetIssueKey: 'WI-6',
        targetIssueStatus: 'IN PROGRESS',
        targetIssueSummary: 'Setup CI/CD pipeline',
      }
    ],
  },
  // OVERDUE ITEM 2 for Fran
  {
    id: '33',
    key: 'WI-33',
    summary: 'Email verification bug fixes',
    status: 'IN PROGRESS',
    assignee: mockAssignees[0],
    effort: 4,
    effortRemaining: 3,
    startDate: '2024-12-28',
    dueDate: '2025-01-08',
    targetDate: '2025-01-06',
    actualDueDate: '2025-01-14', // Significantly overdue - 8 days late from target, 6 days from due
    actualStartDate: '2024-12-30',
    comments: 7,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 750,
    storyPoints: 2,
    originalEstimate: 6,
    remainingEstimate: 2,
    timeSpent: 4,
    dependencies: [],
  },
  // Regular items for Fran
  {
    id: '13',
    key: 'WI-13',
    summary: 'Setup email templates',
    status: 'TO DO',
    assignee: mockAssignees[0],
    effort: 6,
    effortRemaining: 6,
    startDate: '2025-01-15',
    dueDate: '2025-01-29',
    targetDate: '2025-01-27',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 650,
    storyPoints: 3,
    originalEstimate: 8,
    remainingEstimate: 8,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-4',
        type: 'relates-to',
        targetIssueId: '12',
        targetIssueKey: 'WI-12',
        targetIssueStatus: 'IN PROGRESS',
        targetIssueSummary: 'User training materials',
      }
    ],
  },
  {
    id: '17',
    key: 'WI-17',
    summary: 'Performance monitoring setup',
    status: 'TO DO',
    assignee: mockAssignees[0],
    effort: 7,
    effortRemaining: 7,
    startDate: '2025-01-15',
    dueDate: '2025-02-10',
    targetDate: '2025-02-08',
    comments: 0,
    issueType: 'story',
    workStream: 'work-stream-1',
    budget: 2200,
    storyPoints: 5,
    originalEstimate: 10,
    remainingEstimate: 10,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-5',
        type: 'is-blocked-by',
        targetIssueId: '6',
        targetIssueKey: 'WI-6',
        targetIssueStatus: 'IN PROGRESS',
        targetIssueSummary: 'Setup CI/CD pipeline',
      }
    ],
  },
  {
    id: '18',
    key: 'WI-18',
    summary: 'Security audit preparation',
    status: 'TO DO',
    assignee: mockAssignees[0],
    effort: 8,
    effortRemaining: 8,
    startDate: '2025-01-20',
    dueDate: '2025-02-18',
    targetDate: '2025-02-15',
    comments: 0,
    issueType: 'story',
    workStream: 'work-stream-1',
    budget: 3200,
    storyPoints: 8,
    originalEstimate: 12,
    remainingEstimate: 12,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-6',
        type: 'is-blocked-by',
        targetIssueId: '29',
        targetIssueKey: 'WI-29',
        targetIssueStatus: 'IN PROGRESS',
        targetIssueSummary: 'Legacy system cleanup',
      }
    ],
  },
  {
    id: '23',
    key: 'WI-23',
    summary: 'Multi-language support',
    status: 'TO DO',
    assignee: mockAssignees[0],
    effort: 15,
    effortRemaining: 15,
    startDate: '2025-02-01',
    dueDate: '2025-03-15',
    targetDate: '2025-03-10',
    comments: 2,
    issueType: 'epic',
    workStream: 'work-stream-1',
    budget: 8500,
    storyPoints: 21,
    originalEstimate: 24,
    remainingEstimate: 24,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-7',
        type: 'is-blocked-by',
        targetIssueId: '10',
        targetIssueKey: 'WI-10',
        targetIssueStatus: 'TO DO',
        targetIssueSummary: 'Create component library',
      }
    ],
  },
  {
    id: '28',
    key: 'WI-28',
    summary: 'Memory optimization',
    status: 'DONE',
    assignee: mockAssignees[0],
    effort: 4,
    effortRemaining: 0,
    startDate: '2025-01-08',
    dueDate: '2025-01-25',
    targetDate: '2025-01-22',
    actualDueDate: '2025-01-21', // 1 day early from target
    actualStartDate: '2025-01-10',
    comments: 3,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 850,
    storyPoints: 2,
    originalEstimate: 6,
    remainingEstimate: 0,
    timeSpent: 5,
    dependencies: [],
  },
  // New items for Fran (5 more)
  {
    id: '50',
    key: 'WI-50',
    summary: 'OAuth integration enhancements',
    status: 'TO DO',
    assignee: mockAssignees[0],
    effort: 9,
    effortRemaining: 9,
    startDate: '2025-02-10',
    dueDate: '2025-03-01',
    targetDate: '2025-02-28',
    comments: 1,
    issueType: 'story',
    workStream: 'work-stream-1',
    budget: 2500,
    storyPoints: 8,
    originalEstimate: 14,
    remainingEstimate: 14,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '51',
    key: 'WI-51',
    summary: 'Session management improvements',
    status: 'TO DO',
    assignee: mockAssignees[0],
    effort: 5,
    effortRemaining: 5,
    startDate: '2025-02-15',
    dueDate: '2025-02-28',
    targetDate: '2025-02-26',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 1200,
    storyPoints: 3,
    originalEstimate: 8,
    remainingEstimate: 8,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '52',
    key: 'WI-52',
    summary: 'User preferences system',
    status: 'TO DO',
    assignee: mockAssignees[0],
    effort: 12,
    effortRemaining: 12,
    startDate: '2025-02-20',
    dueDate: '2025-03-20',
    targetDate: '2025-03-18',
    comments: 0,
    issueType: 'story',
    workStream: 'work-stream-1',
    budget: 3800,
    storyPoints: 13,
    originalEstimate: 18,
    remainingEstimate: 18,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '53',
    key: 'WI-53',
    summary: 'Rate limiting implementation',
    status: 'TO DO',
    assignee: mockAssignees[0],
    effort: 6,
    effortRemaining: 6,
    startDate: '2025-02-25',
    dueDate: '2025-03-10',
    targetDate: '2025-03-08',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 1400,
    storyPoints: 3,
    originalEstimate: 9,
    remainingEstimate: 9,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '54',
    key: 'WI-54',
    summary: 'Token refresh mechanism',
    status: 'TO DO',
    assignee: mockAssignees[0],
    effort: 4,
    effortRemaining: 4,
    startDate: '2025-03-01',
    dueDate: '2025-03-12',
    targetDate: '2025-03-10',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 950,
    storyPoints: 2,
    originalEstimate: 6,
    remainingEstimate: 6,
    timeSpent: 0,
    dependencies: [],
  },

  // Hassana Ajiyi's issues (12 total: 2 overdue, 10 regular)
  {
    id: '4',
    key: 'WI-4',
    summary: 'Build dashboard layout',
    status: 'DONE',
    assignee: mockAssignees[1],
    effort: 12,
    effortRemaining: 0,
    startDate: '2025-01-08',
    dueDate: '2025-01-28',
    targetDate: '2025-01-25',
    actualDueDate: '2025-01-26', // 1 day late from target, but 2 days early from due date
    actualStartDate: '2025-01-10',
    comments: 5,
    issueType: 'story',
    workStream: 'work-stream-2',
    budget: 3500,
    storyPoints: 8,
    originalEstimate: 16,
    remainingEstimate: 0,
    timeSpent: 17, // Went slightly over estimate
    dependencies: [],
  },
  {
    id: '5',
    key: 'WI-5',
    summary: 'Create data visual',
    status: 'IN PROGRESS',
    assignee: mockAssignees[1],
    effort: 15,
    effortRemaining: 8,
    startDate: '2025-01-22',
    dueDate: '2025-02-22',
    targetDate: '2025-02-20',
    actualStartDate: '2025-01-25',
    comments: 1,
    issueType: 'story',
    workStream: 'work-stream-2',
    budget: 4200,
    storyPoints: 13,
    originalEstimate: 20,
    remainingEstimate: 12,
    timeSpent: 8,
    dependencies: [
      {
        id: 'dep-8',
        type: 'is-blocked-by',
        targetIssueId: '4',
        targetIssueKey: 'WI-4',
        targetIssueStatus: 'DONE',
        targetIssueSummary: 'Build dashboard layout',
      }
    ],
  },
  // OVERDUE ITEM 1 for Hassana
  {
    id: '34',
    key: 'WI-34',
    summary: 'Chart performance optimization',
    status: 'TO DO',
    assignee: mockAssignees[1],
    effort: 8,
    effortRemaining: 8,
    startDate: '2024-12-30',
    dueDate: '2025-01-15',
    targetDate: '2025-01-12',
    comments: 4,
    issueType: 'task',
    workStream: 'work-stream-2',
    budget: 1800,
    storyPoints: 5,
    originalEstimate: 12,
    remainingEstimate: 12,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-9',
        type: 'is-blocked-by',
        targetIssueId: '7',
        targetIssueKey: 'WI-7',
        targetIssueStatus: 'DONE',
        targetIssueSummary: 'Configure Docker containers',
      }
    ],
  },
  // OVERDUE ITEM 2 for Hassana
  {
    id: '35',
    key: 'WI-35',
    summary: 'Widget accessibility fixes',
    status: 'IN PROGRESS',
    assignee: mockAssignees[1],
    effort: 6,
    effortRemaining: 4,
    startDate: '2025-01-02',
    dueDate: '2025-01-10',
    targetDate: '2025-01-08',
    actualDueDate: '2025-01-15', // 7 days late from target, 5 days from due
    actualStartDate: '2025-01-04',
    comments: 6,
    issueType: 'task',
    workStream: 'work-stream-2',
    budget: 1100,
    storyPoints: 3,
    originalEstimate: 8,
    remainingEstimate: 3,
    timeSpent: 5,
    dependencies: [],
  },
  // Regular items for Hassana
  {
    id: '14',
    key: 'WI-14',
    summary: 'Mobile responsive design',
    status: 'TO DO',
    assignee: mockAssignees[1],
    effort: 9,
    effortRemaining: 9,
    startDate: '2025-01-15',
    dueDate: '2025-02-05',
    targetDate: '2025-02-03',
    comments: 2,
    issueType: 'story',
    workStream: 'work-stream-2',
    budget: 2800,
    storyPoints: 8,
    originalEstimate: 14,
    remainingEstimate: 14,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-10',
        type: 'is-blocked-by',
        targetIssueId: '9',
        targetIssueKey: 'WI-9',
        targetIssueStatus: 'IN PROGRESS',
        targetIssueSummary: 'Design system implementation',
      }
    ],
  },
  {
    id: '19',
    key: 'WI-19',
    summary: 'Chart widget enhancements',
    status: 'TO DO',
    assignee: mockAssignees[1],
    effort: 10,
    effortRemaining: 10,
    startDate: '2025-01-20',
    dueDate: '2025-02-20',
    targetDate: '2025-02-18',
    comments: 3,
    issueType: 'story',
    workStream: 'work-stream-2',
    budget: 3200,
    storyPoints: 8,
    originalEstimate: 15,
    remainingEstimate: 15,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-11',
        type: 'relates-to',
        targetIssueId: '5',
        targetIssueKey: 'WI-5',
        targetIssueStatus: 'IN PROGRESS',
        targetIssueSummary: 'Create data visual',
      }
    ],
  },
  {
    id: '24',
    key: 'WI-24',
    summary: 'Real-time notifications',
    status: 'TO DO',
    assignee: mockAssignees[1],
    effort: 11,
    effortRemaining: 11,
    startDate: '2025-02-01',
    dueDate: '2025-03-08',
    targetDate: '2025-03-05',
    comments: 1,
    issueType: 'story',
    workStream: 'work-stream-2',
    budget: 3800,
    storyPoints: 13,
    originalEstimate: 16,
    remainingEstimate: 16,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-12',
        type: 'is-blocked-by',
        targetIssueId: '6',
        targetIssueKey: 'WI-6',
        targetIssueStatus: 'IN PROGRESS',
        targetIssueSummary: 'Setup CI/CD pipeline',
      }
    ],
  },
  {
    id: '32',
    key: 'WI-32',
    summary: 'Payment gateway integration',
    status: 'TO DO',
    assignee: mockAssignees[1],
    effort: 13,
    effortRemaining: 13,
    startDate: '2025-02-03',
    dueDate: '2025-02-28',
    targetDate: '2025-02-25',
    comments: 2,
    issueType: 'epic',
    workStream: 'work-stream-2',
    budget: 6500,
    storyPoints: 21,
    originalEstimate: 20,
    remainingEstimate: 20,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-15',
        type: 'is-blocked-by',
        targetIssueId: '5',
        targetIssueKey: 'WI-5',
        targetIssueStatus: 'IN PROGRESS',
        targetIssueSummary: 'Create data visual',
      },
      {
        id: 'dep-16',
        type: 'is-blocked-by',
        targetIssueId: '15',
        targetIssueKey: 'WI-15',
        targetIssueStatus: 'TO DO',
        targetIssueSummary: 'Database migration scripts',
      }
    ],
  },
  // New items for Hassana (5 more)
  {
    id: '55',
    key: 'WI-55',
    summary: 'Interactive dashboard filters',
    status: 'TO DO',
    assignee: mockAssignees[1],
    effort: 8,
    effortRemaining: 8,
    startDate: '2025-02-10',
    dueDate: '2025-03-05',
    targetDate: '2025-03-03',
    comments: 0,
    issueType: 'story',
    workStream: 'work-stream-2',
    budget: 2200,
    storyPoints: 5,
    originalEstimate: 12,
    remainingEstimate: 12,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-13',
        type: 'is-blocked-by',
        targetIssueId: '4',
        targetIssueKey: 'WI-4',
        targetIssueStatus: 'DONE',
        targetIssueSummary: 'Build dashboard layout',
      }
    ],
  },
  {
    id: '56',
    key: 'WI-56',
    summary: 'Export functionality',
    status: 'TO DO',
    assignee: mockAssignees[1],
    effort: 5,
    effortRemaining: 5,
    startDate: '2025-02-15',
    dueDate: '2025-02-28',
    targetDate: '2025-02-26',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-2',
    budget: 1200,
    storyPoints: 3,
    originalEstimate: 8,
    remainingEstimate: 8,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '57',
    key: 'WI-57',
    summary: 'Advanced charting library',
    status: 'TO DO',
    assignee: mockAssignees[1],
    effort: 14,
    effortRemaining: 14,
    startDate: '2025-02-20',
    dueDate: '2025-03-25',
    targetDate: '2025-03-22',
    comments: 1,
    issueType: 'epic',
    workStream: 'work-stream-2',
    budget: 7200,
    storyPoints: 21,
    originalEstimate: 22,
    remainingEstimate: 22,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '58',
    key: 'WI-58',
    summary: 'Dashboard customization',
    status: 'TO DO',
    assignee: mockAssignees[1],
    effort: 10,
    effortRemaining: 10,
    startDate: '2025-02-25',
    dueDate: '2025-03-20',
    targetDate: '2025-03-18',
    comments: 0,
    issueType: 'story',
    workStream: 'work-stream-2',
    budget: 3100,
    storyPoints: 8,
    originalEstimate: 14,
    remainingEstimate: 14,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '59',
    key: 'WI-59',
    summary: 'Widget drag and drop',
    status: 'TO DO',
    assignee: mockAssignees[1],
    effort: 7,
    effortRemaining: 7,
    startDate: '2025-03-01',
    dueDate: '2025-03-15',
    targetDate: '2025-03-12',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-2',
    budget: 1800,
    storyPoints: 5,
    originalEstimate: 10,
    remainingEstimate: 10,
    timeSpent: 0,
    dependencies: [],
  },

  // Andreas Ramos's issues (12 total: 2 overdue, 10 regular)
  {
    id: '6',
    key: 'WI-6',
    summary: 'Setup CI/CD pipeline',
    status: 'IN PROGRESS',
    assignee: mockAssignees[2],
    effort: 20,
    effortRemaining: 12,
    startDate: '2025-01-05',
    dueDate: '2025-02-05',
    targetDate: '2025-02-01',
    actualStartDate: '2025-01-08',
    comments: 7,
    issueType: 'epic',
    workStream: 'work-stream-3',
    budget: 8800,
    storyPoints: 34,
    originalEstimate: 30,
    remainingEstimate: 18,
    timeSpent: 12,
    dependencies: [
      {
        id: 'dep-17',
        type: 'blocks',
        targetIssueId: '17',
        targetIssueKey: 'WI-17',
        targetIssueStatus: 'TO DO',
        targetIssueSummary: 'Performance monitoring setup',
      },
      {
        id: 'dep-18',
        type: 'blocks',
        targetIssueId: '24',
        targetIssueKey: 'WI-24',
        targetIssueStatus: 'TO DO',
        targetIssueSummary: 'Real-time notifications',
      }
    ],
  },
  {
    id: '7',
    key: 'WI-7',
    summary: 'Configure Docker containers',
    status: 'DONE',
    assignee: mockAssignees[2],
    effort: 7,
    effortRemaining: 0,
    startDate: '2025-01-12',
    dueDate: '2025-01-26',
    targetDate: '2025-01-24',
    actualDueDate: '2025-01-22', // 2 days early from target
    actualStartDate: '2025-01-15',
    comments: 3,
    issueType: 'task',
    workStream: 'work-stream-3',
    budget: 1800,
    storyPoints: 5,
    originalEstimate: 10,
    remainingEstimate: 0,
    timeSpent: 8,
    dependencies: [],
  },
  {
    id: '8',
    key: 'WI-8',
    summary: 'Add automated testing',
    status: 'TO DO',
    assignee: mockAssignees[2],
    effort: 14,
    effortRemaining: 14,
    startDate: '2025-02-01',
    dueDate: '2025-02-28',
    targetDate: '2025-02-25',
    comments: 0,
    issueType: 'story',
    workStream: 'work-stream-3',
    budget: 4200,
    storyPoints: 13,
    originalEstimate: 18,
    remainingEstimate: 18,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-19',
        type: 'is-blocked-by',
        targetIssueId: '6',
        targetIssueKey: 'WI-6',
        targetIssueStatus: 'IN PROGRESS',
        targetIssueSummary: 'Setup CI/CD pipeline',
      }
    ],
  },
  // OVERDUE ITEM 1 for Andreas
  {
    id: '29',
    key: 'WI-29',
    summary: 'Legacy system cleanup',
    status: 'IN PROGRESS',
    assignee: mockAssignees[2],
    effort: 9,
    effortRemaining: 6,
    startDate: '2024-12-20',
    dueDate: '2025-01-10',
    targetDate: '2025-01-08',
    actualDueDate: '2025-01-18', // Expected to finish 10 days late from target, 8 days from due
    actualStartDate: '2024-12-22',
    comments: 8,
    issueType: 'story',
    workStream: 'work-stream-3',
    budget: 2800,
    storyPoints: 8,
    originalEstimate: 12,
    remainingEstimate: 4,
    timeSpent: 8,
    dependencies: [
      {
        id: 'dep-20',
        type: 'blocks',
        targetIssueId: '18',
        targetIssueKey: 'WI-18',
        targetIssueStatus: 'TO DO',
        targetIssueSummary: 'Security audit preparation',
      }
    ],
  },
  // OVERDUE ITEM 2 for Andreas
  {
    id: '36',
    key: 'WI-36',
    summary: 'Database migration rollback',
    status: 'TO DO',
    assignee: mockAssignees[2],
    effort: 5,
    effortRemaining: 5,
    startDate: '2025-01-01',
    dueDate: '2025-01-12',
    targetDate: '2025-01-10',
    comments: 3,
    issueType: 'task',
    workStream: 'work-stream-3',
    budget: 1200,
    storyPoints: 3,
    originalEstimate: 8,
    remainingEstimate: 8,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-21',
        type: 'relates-to',
        targetIssueId: '7',
        targetIssueKey: 'WI-7',
        targetIssueStatus: 'DONE',
        targetIssueSummary: 'Configure Docker containers',
      }
    ],
  },
  // Regular items for Andreas
  {
    id: '15',
    key: 'WI-15',
    summary: 'Database migration scripts',
    status: 'TO DO',
    assignee: mockAssignees[2],
    effort: 4,
    effortRemaining: 4,
    startDate: '2025-01-15',
    dueDate: '2025-01-30',
    targetDate: '2025-01-28',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-3',
    budget: 950,
    storyPoints: 2,
    originalEstimate: 6,
    remainingEstimate: 6,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-22',
        type: 'blocks',
        targetIssueId: '32',
        targetIssueKey: 'WI-32',
        targetIssueStatus: 'TO DO',
        targetIssueSummary: 'Payment gateway integration',
      }
    ],
  },
  {
    id: '20',
    key: 'WI-20',
    summary: 'Code quality improvements',
    status: 'TO DO',
    assignee: mockAssignees[2],
    effort: 6,
    effortRemaining: 6,
    startDate: '2025-01-20',
    dueDate: '2025-02-12',
    targetDate: '2025-02-10',
    comments: 1,
    issueType: 'task',
    workStream: 'work-stream-3',
    budget: 1400,
    storyPoints: 3,
    originalEstimate: 8,
    remainingEstimate: 8,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-23',
        type: 'is-blocked-by',
        targetIssueId: '8',
        targetIssueKey: 'WI-8',
        targetIssueStatus: 'TO DO',
        targetIssueSummary: 'Add automated testing',
      }
    ],
  },
  {
    id: '25',
    key: 'WI-25',
    summary: 'Quick bug fixes batch',
    status: 'IN PROGRESS',
    assignee: mockAssignees[2],
    effort: 3,
    effortRemaining: 1,
    startDate: '2025-01-18',
    dueDate: '2025-01-25',
    targetDate: '2025-01-24',
    actualDueDate: '2025-01-26', // Expected to finish 2 days late from target, 1 day from due
    actualStartDate: '2025-01-20',
    comments: 4,
    issueType: 'task',
    workStream: 'work-stream-3',
    budget: 650,
    storyPoints: 1,
    originalEstimate: 4,
    remainingEstimate: 1,
    timeSpent: 3,
    dependencies: [],
  },
  // New items for Andreas (5 more)
  {
    id: '60',
    key: 'WI-60',
    summary: 'Kubernetes deployment',
    status: 'TO DO',
    assignee: mockAssignees[2],
    effort: 16,
    effortRemaining: 16,
    startDate: '2025-02-10',
    dueDate: '2025-03-15',
    targetDate: '2025-03-12',
    comments: 0,
    issueType: 'epic',
    workStream: 'work-stream-3',
    budget: 7800,
    storyPoints: 34,
    originalEstimate: 25,
    remainingEstimate: 25,
    timeSpent: 0,
    dependencies: [
      {
        id: 'dep-24',
        type: 'blocks',
        targetIssueId: '57',
        targetIssueKey: 'WI-57',
        targetIssueStatus: 'TO DO',
        targetIssueSummary: 'Advanced charting library',
      }
    ],
  },
  {
    id: '61',
    key: 'WI-61',
    summary: 'Load balancer configuration',
    status: 'TO DO',
    assignee: mockAssignees[2],
    effort: 6,
    effortRemaining: 6,
    startDate: '2025-02-15',
    dueDate: '2025-03-01',
    targetDate: '2025-02-28',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-3',
    budget: 1600,
    storyPoints: 3,
    originalEstimate: 8,
    remainingEstimate: 8,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '62',
    key: 'WI-62',
    summary: 'Monitoring and alerting',
    status: 'TO DO',
    assignee: mockAssignees[2],
    effort: 11,
    effortRemaining: 11,
    startDate: '2025-02-20',
    dueDate: '2025-03-20',
    targetDate: '2025-03-18',
    comments: 1,
    issueType: 'story',
    workStream: 'work-stream-3',
    budget: 3400,
    storyPoints: 8,
    originalEstimate: 14,
    remainingEstimate: 14,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '63',
    key: 'WI-63',
    summary: 'Blue-green deployment setup',
    status: 'TO DO',
    assignee: mockAssignees[2],
    effort: 8,
    effortRemaining: 8,
    startDate: '2025-02-25',
    dueDate: '2025-03-18',
    targetDate: '2025-03-15',
    comments: 0,
    issueType: 'story',
    workStream: 'work-stream-3',
    budget: 2600,
    storyPoints: 5,
    originalEstimate: 12,
    remainingEstimate: 12,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '64',
    key: 'WI-64',
    summary: 'Environment provisioning automation',
    status: 'TO DO',
    assignee: mockAssignees[2],
    effort: 9,
    effortRemaining: 9,
    startDate: '2025-03-01',
    dueDate: '2025-03-25',
    targetDate: '2025-03-22',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-3',
    budget: 2200,
    storyPoints: 5,
    originalEstimate: 12,
    remainingEstimate: 12,
    timeSpent: 0,
    dependencies: [],
  },

  // Lydia Legume's issues (11 total: 2 overdue, 9 regular)
  {
    id: '9',
    key: 'WI-9',
    summary: 'Design system implementation',
    status: 'IN PROGRESS',
    assignee: mockAssignees[3],
    effort: 18,
    effortRemaining: 10,
    startDate: '2025-01-18',
    dueDate: '2025-03-01',
    targetDate: '2025-02-28',
    actualStartDate: '2025-01-20',
    comments: 4,
    issueType: 'epic',
    workStream: 'work-stream-4',
    budget: 7200,
    storyPoints: 21,
    originalEstimate: 24,
    remainingEstimate: 14,
    timeSpent: 10,
    dependencies: [],
  },
  {
    id: '10',
    key: 'WI-10',
    summary: 'Create component library',
    status: 'TO DO',
    assignee: mockAssignees[3],
    effort: 12,
    effortRemaining: 12,
    startDate: '2025-02-15',
    dueDate: '2025-03-15',
    targetDate: '2025-03-10',
    comments: 0,
    issueType: 'story',
    workStream: 'work-stream-4',
    budget: 4800,
    storyPoints: 13,
    originalEstimate: 18,
    remainingEstimate: 18,
    timeSpent: 0,
    dependencies: [],
  },
  // OVERDUE ITEM 1 for Lydia
  {
    id: '37',
    key: 'WI-37',
    summary: 'Color palette finalization',
    status: 'TO DO',
    assignee: mockAssignees[3],
    effort: 3,
    effortRemaining: 3,
    startDate: '2025-01-03',
    dueDate: '2025-01-11',
    targetDate: '2025-01-09',
    comments: 2,
    issueType: 'task',
    workStream: 'work-stream-4',
    budget: 450,
    storyPoints: 1,
    originalEstimate: 4,
    remainingEstimate: 4,
    timeSpent: 0,
    dependencies: [],
  },
  // OVERDUE ITEM 2 for Lydia
  {
    id: '38',
    key: 'WI-38',
    summary: 'Typography standards review',
    status: 'IN PROGRESS',
    assignee: mockAssignees[3],
    effort: 4,
    effortRemaining: 2,
    startDate: '2024-12-29',
    dueDate: '2025-01-09',
    targetDate: '2025-01-07',
    actualDueDate: '2025-01-12', // Expected to finish 5 days late from target, 3 days from due
    actualStartDate: '2025-01-02',
    comments: 5,
    issueType: 'task',
    workStream: 'work-stream-4',
    budget: 650,
    storyPoints: 2,
    originalEstimate: 6,
    remainingEstimate: 2,
    timeSpent: 4,
    dependencies: [],
  },
  // Regular items for Lydia
  {
    id: '16',
    key: 'WI-16',
    summary: 'Brand guidelines documentation',
    status: 'TO DO',
    assignee: mockAssignees[3],
    effort: 5,
    effortRemaining: 5,
    startDate: '2025-01-15',
    dueDate: '2025-02-08',
    targetDate: '2025-02-06',
    comments: 1,
    issueType: 'task',
    workStream: 'work-stream-4',
    budget: 850,
    storyPoints: 2,
    originalEstimate: 6,
    remainingEstimate: 6,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '21',
    key: 'WI-21',
    summary: 'Advanced search functionality',
    status: 'TO DO',
    assignee: mockAssignees[3],
    effort: 12,
    effortRemaining: 12,
    startDate: '2025-02-01',
    dueDate: '2025-03-05',
    targetDate: '2025-03-01',
    comments: 0,
    issueType: 'story',
    workStream: 'work-stream-4',
    budget: 3600,
    storyPoints: 8,
    originalEstimate: 16,
    remainingEstimate: 16,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '26',
    key: 'WI-26',
    summary: 'Icon library updates',
    status: 'IN PROGRESS',
    assignee: mockAssignees[3],
    effort: 4,
    effortRemaining: 2,
    startDate: '2025-01-16',
    dueDate: '2025-01-25',
    targetDate: '2025-01-24',
    actualDueDate: '2025-01-26', // Expected to finish 2 days late from target, 1 day from due
    actualStartDate: '2025-01-18',
    comments: 2,
    issueType: 'task',
    workStream: 'work-stream-4',
    budget: 750,
    storyPoints: 2,
    originalEstimate: 6,
    remainingEstimate: 2,
    timeSpent: 4,
    dependencies: [],
  },
  {
    id: '31',
    key: 'WI-31',
    summary: 'User feedback integration',
    status: 'TO DO',
    assignee: mockAssignees[3],
    effort: 7,
    effortRemaining: 7,
    startDate: '2025-01-25',
    dueDate: '2025-02-15',
    targetDate: '2025-02-12',
    comments: 1,
    issueType: 'story',
    workStream: 'work-stream-4',
    budget: 2200,
    storyPoints: 5,
    originalEstimate: 10,
    remainingEstimate: 10,
    timeSpent: 0,
    dependencies: [],
  },
  // New items for Lydia (5 more)
  {
    id: '65',
    key: 'WI-65',
    summary: 'Dark mode implementation',
    status: 'TO DO',
    assignee: mockAssignees[3],
    effort: 10,
    effortRemaining: 10,
    startDate: '2025-02-10',
    dueDate: '2025-03-10',
    targetDate: '2025-03-08',
    comments: 0,
    issueType: 'story',
    workStream: 'work-stream-4',
    budget: 3200,
    storyPoints: 8,
    originalEstimate: 14,
    remainingEstimate: 14,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '66',
    key: 'WI-66',
    summary: 'Animation library setup',
    status: 'TO DO',
    assignee: mockAssignees[3],
    effort: 6,
    effortRemaining: 6,
    startDate: '2025-02-15',
    dueDate: '2025-03-01',
    targetDate: '2025-02-28',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-4',
    budget: 1800,
    storyPoints: 3,
    originalEstimate: 8,
    remainingEstimate: 8,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '67',
    key: 'WI-67',
    summary: 'Responsive grid system',
    status: 'TO DO',
    assignee: mockAssignees[3],
    effort: 8,
    effortRemaining: 8,
    startDate: '2025-02-20',
    dueDate: '2025-03-15',
    targetDate: '2025-03-12',
    comments: 1,
    issueType: 'story',
    workStream: 'work-stream-4',
    budget: 2600,
    storyPoints: 5,
    originalEstimate: 12,
    remainingEstimate: 12,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '68',
    key: 'WI-68',
    summary: 'Accessibility audit and fixes',
    status: 'TO DO',
    assignee: mockAssignees[3],
    effort: 9,
    effortRemaining: 9,
    startDate: '2025-02-25',
    dueDate: '2025-03-20',
    targetDate: '2025-03-18',
    comments: 2,
    issueType: 'story',
    workStream: 'work-stream-4',
    budget: 3500,
    storyPoints: 8,
    originalEstimate: 14,
    remainingEstimate: 14,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '69',
    key: 'WI-69',
    summary: 'Style guide maintenance',
    status: 'TO DO',
    assignee: mockAssignees[3],
    effort: 3,
    effortRemaining: 3,
    startDate: '2025-03-01',
    dueDate: '2025-03-12',
    targetDate: '2025-03-10',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-4',
    budget: 650,
    storyPoints: 1,
    originalEstimate: 4,
    remainingEstimate: 4,
    timeSpent: 0,
    dependencies: [],
  },

  // Maria Santos's issues (9 total: 2 overdue, 7 regular)
  {
    id: '11',
    key: 'WI-11',
    summary: 'API documentation',
    status: 'DONE',
    assignee: mockAssignees[4],
    effort: 5,
    effortRemaining: 0,
    startDate: '2025-01-03',
    dueDate: '2025-01-17',
    targetDate: '2025-01-15',
    actualDueDate: '2025-01-14', // 1 day early from target
    actualStartDate: '2025-01-05',
    comments: 2,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 850,
    storyPoints: 2,
    originalEstimate: 6,
    remainingEstimate: 0,
    timeSpent: 5,
    dependencies: [],
  },
  {
    id: '12',
    key: 'WI-12',
    summary: 'User training materials',
    status: 'IN PROGRESS',
    assignee: mockAssignees[4],
    effort: 8,
    effortRemaining: 6,
    startDate: '2025-01-28',
    dueDate: '2025-02-25',
    targetDate: '2025-02-22',
    actualStartDate: '2025-01-30',
    comments: 1,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 1200,
    storyPoints: 3,
    originalEstimate: 10,
    remainingEstimate: 7,
    timeSpent: 3,
    dependencies: [],
  },
  // OVERDUE ITEM 1 for Maria
  {
    id: '39',
    key: 'WI-39',
    summary: 'Technical documentation review',
    status: 'TO DO',
    assignee: mockAssignees[4],
    effort: 6,
    effortRemaining: 6,
    startDate: '2025-01-01',
    dueDate: '2025-01-13',
    targetDate: '2025-01-11',
    comments: 3,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 950,
    storyPoints: 2,
    originalEstimate: 8,
    remainingEstimate: 8,
    timeSpent: 0,
    dependencies: [],
  },
  // OVERDUE ITEM 2 for Maria
  {
    id: '40',
    key: 'WI-40',
    summary: 'Help center content update',
    status: 'IN PROGRESS',
    assignee: mockAssignees[4],
    effort: 4,
    effortRemaining: 2,
    startDate: '2024-12-28',
    dueDate: '2025-01-08',
    targetDate: '2025-01-06',
    actualDueDate: '2025-01-13', // Expected to finish 7 days late from target, 5 days from due
    actualStartDate: '2024-12-30',
    comments: 4,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 650,
    storyPoints: 1,
    originalEstimate: 5,
    remainingEstimate: 2,
    timeSpent: 3,
    dependencies: [],
  },
  // Regular items for Maria
  {
    id: '22',
    key: 'WI-22',
    summary: 'Backup and recovery testing',
    status: 'TO DO',
    assignee: mockAssignees[4],
    effort: 8,
    effortRemaining: 8,
    startDate: '2025-02-01',
    dueDate: '2025-02-25',
    targetDate: '2025-02-22',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 1400,
    storyPoints: 3,
    originalEstimate: 10,
    remainingEstimate: 10,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '27',
    key: 'WI-27',
    summary: 'Content management improvements',
    status: 'IN PROGRESS',
    assignee: mockAssignees[4],
    effort: 5,
    effortRemaining: 3,
    startDate: '2025-01-14',
    dueDate: '2025-01-25',
    targetDate: '2025-01-23',
    actualDueDate: '2025-01-27', // Expected to finish 4 days late from target, 2 days from due
    actualStartDate: '2025-01-16',
    comments: 1,
    issueType: 'story',
    workStream: 'work-stream-1',
    budget: 850,
    storyPoints: 2,
    originalEstimate: 6,
    remainingEstimate: 3,
    timeSpent: 3,
    dependencies: [],
  },
  // New items for Maria (5 more)
  {
    id: '70',
    key: 'WI-70',
    summary: 'Knowledge base expansion',
    status: 'TO DO',
    assignee: mockAssignees[4],
    effort: 10,
    effortRemaining: 10,
    startDate: '2025-02-10',
    dueDate: '2025-03-10',
    targetDate: '2025-03-08',
    comments: 0,
    issueType: 'story',
    workStream: 'work-stream-1',
    budget: 2200,
    storyPoints: 5,
    originalEstimate: 12,
    remainingEstimate: 12,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '71',
    key: 'WI-71',
    summary: 'Video tutorial creation',
    status: 'TO DO',
    assignee: mockAssignees[4],
    effort: 12,
    effortRemaining: 12,
    startDate: '2025-02-15',
    dueDate: '2025-03-20',
    targetDate: '2025-03-18',
    comments: 1,
    issueType: 'epic',
    workStream: 'work-stream-1',
    budget: 4800,
    storyPoints: 13,
    originalEstimate: 18,
    remainingEstimate: 18,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '72',
    key: 'WI-72',
    summary: 'FAQ maintenance',
    status: 'TO DO',
    assignee: mockAssignees[4],
    effort: 3,
    effortRemaining: 3,
    startDate: '2025-02-20',
    dueDate: '2025-03-01',
    targetDate: '2025-02-28',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 450,
    storyPoints: 1,
    originalEstimate: 4,
    remainingEstimate: 4,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '73',
    key: 'WI-73',
    summary: 'User onboarding flow',
    status: 'TO DO',
    assignee: mockAssignees[4],
    effort: 8,
    effortRemaining: 8,
    startDate: '2025-02-25',
    dueDate: '2025-03-18',
    targetDate: '2025-03-15',
    comments: 0,
    issueType: 'story',
    workStream: 'work-stream-1',
    budget: 2600,
    storyPoints: 5,
    originalEstimate: 12,
    remainingEstimate: 12,
    timeSpent: 0,
    dependencies: [],
  },
  {
    id: '74',
    key: 'WI-74',
    summary: 'Documentation automation',
    status: 'TO DO',
    assignee: mockAssignees[4],
    effort: 6,
    effortRemaining: 6,
    startDate: '2025-03-01',
    dueDate: '2025-03-20',
    targetDate: '2025-03-18',
    comments: 0,
    issueType: 'task',
    workStream: 'work-stream-1',
    budget: 1400,
    storyPoints: 3,
    originalEstimate: 8,
    remainingEstimate: 8,
    timeSpent: 0,
    dependencies: [],
  },
];

// Mock Work Streams
export const mockWorkStreams: WorkStream[] = [
  {
    id: 'work-stream-1',
    name: 'Authentication & Security',
    color: 'orange',
    issues: mockIssues.filter(issue => issue.workStream === 'work-stream-1'),
  },
  {
    id: 'work-stream-2',
    name: 'Dashboard & UI',
    color: 'blue',
    issues: mockIssues.filter(issue => issue.workStream === 'work-stream-2'),
  },
  {
    id: 'work-stream-3',
    name: 'Infrastructure',
    color: 'purple',
    issues: mockIssues.filter(issue => issue.workStream === 'work-stream-3'),
  },
  {
    id: 'work-stream-4',
    name: 'Design System',
    color: 'pink',
    issues: mockIssues.filter(issue => issue.workStream === 'work-stream-4'),
  },
];

// Calculate roll-up dates for work stream
export const calculateRollupDates = (issues: Issue[]) => {
  // Return default dates if no issues are provided
  if (issues.length === 0) {
    const now = new Date();
    return {
      startDate: now,
      dueDate: now,
    };
  }

  const startDates = issues.map(issue => new Date(issue.startDate));
  const dueDates = issues.map(issue => new Date(issue.dueDate));
  
  return {
    startDate: new Date(Math.min(...startDates.map(d => d.getTime()))),
    dueDate: new Date(Math.max(...dueDates.map(d => d.getTime()))),
  };
};

// Calculate tracking status based on target vs due date
export const calculateTrackingStatus = (targetDate: string, dueDate: string) => {
  const target = new Date(targetDate);
  const due = new Date(dueDate);
  const diffDays = Math.ceil((due.getTime() - target.getTime()) / (1000 * 60 * 60 * 24));
  
  if (diffDays < 0) return { status: 'Off track', severity: 'high', days: Math.abs(diffDays) };
  if (diffDays <= 3) return { status: 'At risk', severity: 'medium', days: diffDays };
  return { status: 'On track', severity: 'low', days: diffDays };
};

// Group issues by assignee
export const groupIssuesByAssignee = (issues: Issue[]) => {
  const grouped = issues.reduce((acc, issue) => {
    const assigneeId = issue.assignee.id;
    if (!acc[assigneeId]) {
      acc[assigneeId] = {
        assignee: issue.assignee,
        issues: [],
      };
    }
    acc[assigneeId].issues.push(issue);
    return acc;
  }, {} as Record<string, { assignee: Assignee; issues: Issue[] }>);

  return Object.values(grouped);
};

// Calculate aggregated metrics for a group of issues
export const calculateAggregatedMetrics = (groupIssues: Issue[]) => {
  if (groupIssues.length === 0) {
    return {
      earliestStart: new Date(),
      latestDue: new Date(),
      totalBudget: 0,
      totalStoryPoints: 0,
      totalOriginalEstimate: 0,
      totalTimeSpent: 0,
      avgSlippageDays: 0
    };
  }

  // Calculate date ranges
  const startDates = groupIssues.map(issue => new Date(issue.startDate));
  const dueDates = groupIssues.map(issue => new Date(issue.dueDate));
  const earliestStart = new Date(Math.min(...startDates.map(d => d.getTime())));
  const latestDue = new Date(Math.max(...dueDates.map(d => d.getTime())));

  // Calculate new aggregated metrics
  const totalBudget = groupIssues.reduce((sum, issue) => sum + (issue.budget || 0), 0);
  const totalStoryPoints = groupIssues.reduce((sum, issue) => sum + (issue.storyPoints || 0), 0);
  
  // Calculate time usage totals
  const totalOriginalEstimate = groupIssues.reduce((sum, issue) => sum + (issue.originalEstimate || 0), 0);
  const totalTimeSpent = groupIssues.reduce((sum, issue) => sum + (issue.timeSpent || 0), 0);
    
  // Calculate average slippage days for completed items
  const completedItems = groupIssues.filter(issue => issue.actualDueDate);
  const avgSlippageDays = completedItems.length > 0 
    ? completedItems.reduce((sum, issue) => {
        const target = new Date(issue.targetDate);
        const actual = new Date(issue.actualDueDate!);
        const slippage = Math.ceil((actual.getTime() - target.getTime()) / (1000 * 60 * 60 * 24));
        return sum + slippage;
      }, 0) / completedItems.length
    : 0;

  return {
    earliestStart,
    latestDue,
    totalBudget,
    totalStoryPoints,
    totalOriginalEstimate,
    totalTimeSpent,
    avgSlippageDays
  };
};